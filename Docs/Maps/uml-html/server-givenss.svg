<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="529px" preserveAspectRatio="none" style="width:742px;height:529px;" version="1.1" viewBox="0 0 742 529" width="742px" zoomAndPan="magnify"><defs><filter height="300%" id="f1qgianq2tok7d" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="252" x="244" y="28.6855">Srver Side (first pass) Variables</text><ellipse cx="78.5" cy="42.6406" fill="#000000" filter="url(#f1qgianq2tok7d)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M157,62.6406 L157,478.1416 L730,478.1416 L730,72.6406 L720,62.6406 L157,62.6406 " fill="#FBFB77" filter="url(#f1qgianq2tok7d)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M720,62.6406 L720,72.6406 L730,72.6406 L720,62.6406 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="40" x="163" y="81.1357">GIVEN</text><ellipse cx="168.5" cy="93.4658" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="48" x="176" y="97.062">dm-svg</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="336" y="97.062"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="336" y="98.1094">object to update or</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="13" x="448" y="98.1094">nil</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="465" y="98.1094">to return draw code</text><ellipse cx="168.5" cy="110.4395" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="112" x="176" y="114.0356">target-map-pos</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="344" y="114.0356"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="344" y="115.083">as tuple</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="394" y="114.0356">(x y dlv)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="466" y="115.083">, the new Map Position if successful</text><ellipse cx="168.5" cy="127.4131" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="152" x="176" y="131.0093">direction-of-travel</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="344" y="131.0093"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="344" y="132.0566">one of N..NE, or Teleport, Stairs, etc.</text><ellipse cx="168.5" cy="144.3867" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="112" x="176" y="147.9829">scaling-factor</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="344" y="147.9829"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="344" y="149.0303">as a cons cell</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="429" y="147.9829">(x-scale . y-scale)</text><ellipse cx="168.5" cy="161.3604" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="80" x="176" y="164.9565">map-source</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="352" y="164.9565"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="352" y="166.0039">as an hash table</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="177.2119"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="189" y="182.3555">Each Key is one of:</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="197" y="194.1855"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="88" x="202" y="198.2817">Map Feature</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="314" y="198.2817"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="314" y="199.3291">a unique symbol, or</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="197" y="211.1592"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="202" y="215.2554">Map Position</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="314" y="215.2554"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="314" y="216.3027">as elsewhere described, or</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="197" y="228.1328"/><text fill="#000000" font-family="monospace" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="8" x="202" y="232.229">t</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="314" y="232.229"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="314" y="233.2764">as a special case, for features we always draw.</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="244.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="242" x="189" y="249.6279">Values are a plist including pairs as such:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="187" y="265.5542">(list 'plan          LIST             ;; raw draw source</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="480" x="235" y="282.5278">'paths         LIST             ;; abbreviated SVG path code</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="424" x="235" y="299.5015">'elements      LIST             ;; complete SVG nodes</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="408" x="235" y="316.4751">'documentation STRING           ;; local doc-string</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="448" x="235" y="333.4487">'narrative     STRING_OR_SYMBOL ;; narration for players</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="235" y="350.4224">'behaviour     LIST            );; symbols or functions</text><ellipse cx="168.5" cy="363.7998" fill="#000000" rx="2.5" ry="2.5" style="stroke: #000000; stroke-width: 0.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="160" x="176" y="367.396">party-location-plist</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="352" y="367.396"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="352" y="368.4434">Which properites derive from:</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="380.2734"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="189" y="384.3696">Party</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="237" y="384.3696">compisition</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="357" y="385.417">presence of each</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="460" y="385.417">Race</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="30" x="492" y="385.417">, etc.</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="397.2471"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="40" x="189" y="401.3433">Event</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="357" y="401.3433"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="265" x="357" y="402.3906">including circumstantial e.g. Chased by Slugs</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="414.2207"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="189" y="418.3169">Special Powers</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="357" y="418.3169"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="357" y="419.3643">character</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="415" y="419.3643">Special Power</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="512" y="419.3643">may affect movement</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="431.1943"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="189" y="435.2905">Map Position</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="357" y="435.2905"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="357" y="436.3379">as tuple</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="407" y="435.2905">(x y div)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="479" y="436.3379">, prior to this move</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="448.168"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="189" y="452.2642">Map Seen</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="357" y="452.2642"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="357" y="453.3115">list of</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="392" y="453.3115">Map Position</text><rect fill="#000000" height="3.5" style="stroke: #000000; stroke-width: 0.0;" width="3.5" x="184" y="465.1416"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="189" y="469.2378">t</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="389" y="470.2852">default behaviours, e.g. automation</text><rect fill="#FEFECE" filter="url(#f1qgianq2tok7d)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="10" y="252.8442"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="20" y="275.3013">dm-map-start-update</text><ellipse cx="78.5" cy="508.1416" fill="#FFFFFF" filter="url(#f1qgianq2tok7d)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="72.3128" x2="84.6872" y1="501.9544" y2="514.3288"/><line style="stroke: #000000; stroke-width: 2.5;" x1="84.6872" x2="72.3128" y1="501.9544" y2="514.3288"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="78.5" y1="52.6406" y2="252.8442"/><polygon fill="#A80036" points="74.5,242.8442,78.5,252.8442,82.5,242.8442,78.5,246.8442" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="78.5" x2="78.5" y1="287.938" y2="498.1416"/><polygon fill="#A80036" points="74.5,488.1416,78.5,498.1416,82.5,488.1416,78.5,492.1416" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[3e2642eb33ced6839138fa7c8f56a52b]
@startuml
title Srver Side (first pass) Variables
start
:dm-map-start-update;
floating note right
  __**GIVEN**__
  *""__dm-svg__              ""object to update or //nil// to return draw code
  * ""__target-map-pos__       ""as tuple ""(x y dlv)"", the new Map Position if successful
  * ""__direction-of-travel__  ""one of N..NE, or Teleport, Stairs, etc.
  * ""__scaling-factor__       ""as a cons cell ""(x-scale . y-scale)""
  *""__map-source__            ""as an hash table
  ** Each Key is one of:
  ***""**Map Feature**   ""a unique symbol, or
  ***""**Map Position**  ""as elsewhere described, or
  ***""//t//             ""as a special case, for features we always draw.
  ** Values are a plist including pairs as such:
  ""   (list 'plan          LIST             ;; raw draw source""
  ""         'paths         LIST             ;; abbreviated SVG path code""
  ""         'elements      LIST             ;; complete SVG nodes""
  ""         'documentation STRING           ;; local doc-string""
  ""         'narrative     STRING_OR_SYMBOL ;; narration for players""
  ""         'behaviour     LIST            );; symbols or functions""
  *""__party-location-plist__  ""Which properites derive from:
  **""**Party** compisition    ""presence of each **Race**, etc.
  **""**Event**                ""including circumstantial e.g. Chased by Slugs
  **""**Special Powers**       ""character **Special Power** may affect movement
  **""**Map Position**         ""as tuple ""(x y div)"", prior to this move
  **""**Map Seen**             ""list of **Map Position**
  **""t                        ""default behaviours, e.g. automation
end note
end
@enduml

PlantUML version 1.2020.00(Sat Jan 11 06:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_241-b07
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>