<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="764px" preserveAspectRatio="none" style="width:640px;height:764px;" version="1.1" viewBox="0 0 640 764" width="640px" zoomAndPan="magnify"><defs><filter height="300%" id="f34t0tbwatf17" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="200" x="219.375" y="28.6855">Client Response Handler</text><ellipse cx="429" cy="42.6406" fill="#FEFECE" filter="url(#f34t0tbwatf17)" rx="10" ry="10" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M431.5625,44.125 L432.6875,44.4219 Q432.3281,45.8125 431.4063,46.5469 Q430.4844,47.2813 429.1406,47.2813 Q427.75,47.2813 426.875,46.7188 Q426,46.1563 425.5469,45.0859 Q425.0938,44.0156 425.0938,42.7813 Q425.0938,41.4375 425.6094,40.4375 Q426.125,39.4375 427.0703,38.9219 Q428.0156,38.4063 429.1563,38.4063 Q430.4375,38.4063 431.3203,39.0625 Q432.2031,39.7188 432.5469,40.9063 L431.4219,41.1719 Q431.125,40.2344 430.5547,39.8047 Q429.9844,39.375 429.125,39.375 Q428.1406,39.375 427.4766,39.8516 Q426.8125,40.3281 426.5391,41.125 Q426.2656,41.9219 426.2656,42.7813 Q426.2656,43.875 426.5859,44.6875 Q426.9063,45.5 427.5781,45.9063 Q428.25,46.3125 429.0469,46.3125 Q430,46.3125 430.6641,45.7656 Q431.3281,45.2188 431.5625,44.125 Z "/><path d="M10,86.4766 L10,146.7754 A0,0 0 0 0 10,146.7754 L266,146.7754 A0,0 0 0 0 266,146.7754 L266,120.626 L286,116.626 L266,112.626 L266,96.4766 L256,86.4766 L10,86.4766 A0,0 0 0 0 10,86.4766 " fill="#FBFB77" filter="url(#f34t0tbwatf17)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M256,86.4766 L256,96.4766 L266,96.4766 L256,86.4766 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="54" x="16" y="104.9717">result as:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="24" y="120.8979"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="24" y="120.8979">path</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="96" y="120.8979"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="96" y="121.9453">string</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="24" y="137.8716"/><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="24" y="137.8716">features</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="96" y="137.8716"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="96" y="138.9189">list of</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="131" y="137.8716">(SYMBOL STRING)</text><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.668" style="stroke: #A80036; stroke-width: 1.5;" width="286" x="286" y="98.792"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="291" x2="291" y1="98.792" y2="134.46"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="567" x2="567" y1="98.792" y2="134.46"/><text fill="#000000" font-family="monospace" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="266" x="296" y="120.8564">dm-call-client-func(orig-args, result)</text><rect fill="#FFFFFF" filter="url(#f34t0tbwatf17)" height="555.915" style="stroke: #000000; stroke-width: 2.0;" width="591.75" x="38" y="157.3516"/><path d="M224,158.3516 L224,167.9609 L214,177.9609 L38,177.9609 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="176" x="41" y="172.8848">dm-handle-server-response</text><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="374" y="194.9609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="90" x="384" y="217.418">remove-from-list</text><polygon fill="#FEFECE" filter="url(#f34t0tbwatf17)" points="362.5,306.9736,495.5,306.9736,507.5,318.9736,495.5,330.9736,362.5,330.9736,350.5,318.9736,362.5,306.9736" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="362.5" y="323.4746">feature previously cached?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="3" x="347.5" y="316.5566">t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="507.5" y="316.5566">nil</text><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="206" x="220.75" y="389.8916"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="186" x="230.75" y="412.3486">collect feature referents for redraw</text><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="274.75" y="459.9854"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="284.75" y="482.4424">freshen cache</text><polygon fill="#FEFECE" filter="url(#f34t0tbwatf17)" points="259.75,340.9736,387.75,340.9736,399.75,352.9736,387.75,364.9736,259.75,364.9736,247.75,352.9736,259.75,340.9736" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="3" x="327.75" y="376.3926">t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="259.75" y="357.4746">feature differs from cache</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="399.75" y="350.5566">nil</text><polygon fill="#FEFECE" filter="url(#f34t0tbwatf17)" points="323.75,515.0791,335.75,527.0791,323.75,539.0791,311.75,527.0791,323.75,515.0791" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="468.75" y="340.9736"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="478.75" y="363.4307">add feature to cache</text><polygon fill="#FEFECE" filter="url(#f34t0tbwatf17)" points="429,545.0791,441,557.0791,429,569.0791,417,557.0791,429,545.0791" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="218" x="320" y="589.0791"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="198" x="330" y="611.5361">add cell to list of referents for feature</text><polygon fill="#FEFECE" filter="url(#f34t0tbwatf17)" points="405.5,250.0547,452.5,250.0547,464.5,262.0547,452.5,274.0547,405.5,274.0547,393.5,262.0547,405.5,250.0547" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="3" x="433" y="285.4736">t</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="405.5" y="266.5557">features?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="10" x="383.5" y="259.6377">nil</text><path d="M48,670.2329 L48,697.2065 A0,0 0 0 0 48,697.2065 L369,697.2065 A0,0 0 0 0 369,697.2065 L369,688.2329 L389,683.7197 L369,680.2329 L369,680.2329 L359,670.2329 L48,670.2329 A0,0 0 0 0 48,670.2329 " fill="#FBFB77" filter="url(#f34t0tbwatf17)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M359,670.2329 L359,680.2329 L369,680.2329 L359,670.2329 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="24" x="54" y="689.3501">E.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="272" x="82" y="688.3027">(addhash map-cache (x y dlv) path)</text><rect fill="#FEFECE" filter="url(#f34t0tbwatf17)" height="35.0938" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="389" y="666.1729"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="399" y="688.6299">cache path</text><ellipse cx="429" cy="743.2666" fill="#FEFECE" filter="url(#f34t0tbwatf17)" rx="10" ry="10" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M426.4219,747.7666 L426.4219,739.1729 L429.3906,739.1729 Q430.3906,739.1729 430.9219,739.2979 Q431.6563,739.4697 432.1719,739.9072 Q432.8594,740.4854 433.1953,741.3838 Q433.5313,742.2822 433.5313,743.4229 Q433.5313,744.4072 433.3047,745.1572 Q433.0781,745.9072 432.7188,746.4072 Q432.3594,746.9072 431.9297,747.1885 Q431.5,747.4697 430.9063,747.6182 Q430.3125,747.7666 429.5313,747.7666 L426.4219,747.7666 Z M427.5625,746.751 L429.3906,746.751 Q430.25,746.751 430.7344,746.5947 Q431.2188,746.4385 431.5,746.1416 Q431.9063,745.751 432.1328,745.0635 Q432.3594,744.376 432.3594,743.4072 Q432.3594,742.0635 431.9141,741.3369 Q431.4688,740.6104 430.8438,740.3604 Q430.375,740.1885 429.375,740.1885 L427.5625,740.1885 L427.5625,746.751 Z "/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="52.6406" y2="98.792"/><polygon fill="#A80036" points="425,88.792,429,98.792,433,88.792,429,92.792" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="433" y="74.9766">local function call by remote</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="323.75" y1="424.9854" y2="459.9854"/><polygon fill="#A80036" points="319.75,449.9854,323.75,459.9854,327.75,449.9854,323.75,453.9854" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="323.75" y1="364.9736" y2="389.8916"/><polygon fill="#A80036" points="319.75,379.8916,323.75,389.8916,327.75,379.8916,323.75,383.8916" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="399.75" x2="436.75" y1="352.9736" y2="352.9736"/><polygon fill="#A80036" points="432.75,432.4854,436.75,442.4854,440.75,432.4854,436.75,436.4854" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="436.75" x2="436.75" y1="352.9736" y2="527.0791"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="436.75" x2="335.75" y1="527.0791" y2="527.0791"/><polygon fill="#A80036" points="345.75,523.0791,335.75,527.0791,345.75,531.0791,341.75,527.0791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="323.75" y1="495.0791" y2="515.0791"/><polygon fill="#A80036" points="319.75,505.0791,323.75,515.0791,327.75,505.0791,323.75,509.0791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="350.5" x2="323.75" y1="318.9736" y2="318.9736"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="323.75" y1="318.9736" y2="340.9736"/><polygon fill="#A80036" points="319.75,330.9736,323.75,340.9736,327.75,330.9736,323.75,334.9736" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="507.5" x2="534.25" y1="318.9736" y2="318.9736"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="534.25" x2="534.25" y1="318.9736" y2="340.9736"/><polygon fill="#A80036" points="530.25,330.9736,534.25,340.9736,538.25,330.9736,534.25,334.9736" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="323.75" y1="539.0791" y2="557.0791"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="323.75" x2="417" y1="557.0791" y2="557.0791"/><polygon fill="#A80036" points="407,553.0791,417,557.0791,407,561.0791,411,557.0791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="534.25" x2="534.25" y1="376.0674" y2="557.0791"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="534.25" x2="441" y1="557.0791" y2="557.0791"/><polygon fill="#A80036" points="451,553.0791,441,557.0791,451,561.0791,447,557.0791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="569.0791" y2="589.0791"/><polygon fill="#A80036" points="425,579.0791,429,589.0791,433,579.0791,429,583.0791" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="274.0547" y2="306.9736"/><polygon fill="#A80036" points="425,296.9736,429,306.9736,433,296.9736,429,300.9736" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="624.1729" y2="634.1729"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="613.75" y1="634.1729" y2="634.1729"/><polygon fill="#A80036" points="609.75,466.6143,613.75,456.6143,617.75,466.6143,613.75,462.6143" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="613.75" x2="613.75" y1="262.0547" y2="634.1729"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="613.75" x2="464.5" y1="262.0547" y2="262.0547"/><polygon fill="#A80036" points="474.5,258.0547,464.5,262.0547,474.5,266.0547,470.5,262.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="393.5" x2="188.75" y1="262.0547" y2="262.0547"/><polygon fill="#A80036" points="184.75,452.6143,188.75,462.6143,192.75,452.6143,188.75,456.6143" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.75" x2="188.75" y1="262.0547" y2="646.1729"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.75" x2="429" y1="646.1729" y2="646.1729"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="646.1729" y2="666.1729"/><polygon fill="#A80036" points="425,656.1729,429,666.1729,433,656.1729,429,660.1729" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="230.0547" y2="250.0547"/><polygon fill="#A80036" points="425,240.0547,429,250.0547,433,240.0547,429,244.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="134.46" y2="194.9609"/><polygon fill="#A80036" points="425,184.9609,429,194.9609,433,184.9609,429,188.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="429" x2="429" y1="701.2666" y2="733.2666"/><polygon fill="#A80036" points="425,723.2666,429,733.2666,433,723.2666,429,727.2666" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6ba8c898df6cbb0fda6e01b435fecf62]
@startuml
title Client Response Handler
(C)
-> local function call by remote;

:""dm-call-client-func(orig-args, result)""|
note left
//result as://
"" **path**     ""string
"" **features** ""list of ""(SYMBOL STRING)""
end note

partition dm-handle-server-response {
  :remove-from-list;

  while (features?) is (t)
    if (feature previously cached?) then (t)
      if (feature differs from cache) then (t)
        :collect feature referents for redraw;
        :freshen cache;
      else (nil)
      endif
    else (nil)

      :add feature to cache;
    endif

    :add cell to list of referents for feature;
  endwhile (nil)
  :cache path;
  note left: E.g. ""(addhash map-cache (x y dlv) path)""
}

(D)
-> local deligation;
detach
@enduml

PlantUML version 1.2020.00(Sat Jan 11 06:30:53 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.8.0_241-b07
Operating System: Windows 10
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>